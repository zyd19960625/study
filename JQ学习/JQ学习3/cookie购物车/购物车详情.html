<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        #product{
            background: #eee;
            width:1200px;
            margin:20px auto;
            border-top:5px solid #ccc;
        }
        #list{
            clear:both;
            overflow:hidden;
        }
        #list div{
            float:left;
            font:14px/32px "";
            color:#333;
        }
        .h1,.c1{width: 50%;}
        .h2,.c2{width: 15%;}
        .h3,.c3{width: 20%; }
        #cart-list .pl{
            width: 100%;
            height: 94px;
            border-bottom:solid 1px #C5C5C5;
            clear: left;
        }
        #cart-list .pl div{
            float: left;
            height: 94px;
            line-height: 94px;
            background: #FFF4E8;
        }
        #cart-list div span{
            display: block;
            float: left;
            padding: 5px 0 0 20px;
        }
        #cart-list div p{
            float: left;
            padding-left: 20px;
        }
        #cart-list div span img{
            width:80px;
        }
        .pl a{
            color:#666;
            text-decoration: none;
        }
        .pl a:hover{
            color:#ff0000;
            text-decoration: underline;
        }
    </style>
</head>
<body>
<div id="product">
    <div id="list">
        <div class="h1">商品名称</div>
        <div class="h2">价格</div>
        <div class="h2">数量</div>
        <div class="h3">操作</div>
    </div>
    <div id="cart-list">
     <!-- <div class="pl" id="p_0">
            <div class="c1"><span><img src="img/2.jpg"></span>
                <p>乐视超级电视 S60</p></div><div class="c2">¥3999</div>
            <div class="c3"><a href="javascript:delProduct('p_0','乐视超级电视 S60');">删除</a></div>
        </div>-->
    </div>
</div>
</body>

<script src="myCookie.js"></script>
<script>
    //getCookie
    //利用cookie组织dom元素添加到cartbox
    /*  var sHtml="<div class=\"p1\" id=\"p_1\" >";
        sHtml+="<div class=\"c1\">";
        sHtml+="<span><img src=\"img/2.jpg\"></span>";
        sHtml+="<p>乐视超级电视 s60</p>";
        sHtml+="</div>"
        sHtml+="<div class=\"c2\">";
        sHtml+="<div class=\"c3\">";*/

    function getCarCookie(){
        var carCookieString=getCookie("carCookie");
        if(carCookieString.length>0){
        var  arrProducts=carCookieString.split("||");//每个商品的信息数组
        for(var i=0;i<arrProducts.length;i++){
            var arrProductInfo=arrProducts[i].split("&&");
            initProduct(arrProductInfo[0],arrProductInfo[1],arrProductInfo[2],arrProductInfo[3]);
            }
        }
    }
    
    function initProduct(name,price,imgsrc,pid){
        var sHtml="<div class=\"pl\"  pid=\""+pid+"\">";
        sHtml+="<div class=\"c1\">";
        sHtml+="<span><img src=\""+imgsrc+"\"></span>";
        sHtml+="<p>"+name+"</p>";
        sHtml+="</div>"
        sHtml+="<div class=\"c2\">"+price+"</div>";
        sHtml+="<div class=\"c2\">1</div>";
        sHtml+="<div></div>";
        sHtml+="<div class=\"c3\">";
        sHtml+="<a href=\"javascript:;\"onclick=\"deleteProduct(this)\">删除</a>";//a href="javascript:;
        sHtml+="</div></div>";
        var cartBox=document.getElementById("cart-list");
        cartBox.innerHTML=cartBox.innerHTML+sHtml;
    }

    function deleteProduct(domA){
        //删除cookie
        //删除页面中的商品
        domA.parentNode.parentNode.parentNode.removeChild(domA.parentNode.parentNode);
        var ppid=domA.parentNode.parentNode.attributes["pid"].nodeValue;
        deleteCarCookie(ppid);
    }
    
    function deleteCarCookie(pid){
        var productCookie=getCookie("carCookie");
        //乐事超级电视 S80&&5999&&img/4.jpg&&lstvs80&&1||乐事超级电视 S70&&4999&&img/3.jpg&&lstvs60&&1||乐事超级电视 S60&&4999&&img/3.jpg&&lstvs60&&1
        var arrProducts=productCookie.split("||");
        //["乐事超级电视 S80&&5999&&img/4.jpg&&lstvs80&&1","乐事超级电视 S70&&4999&&img/3.jpg&&lstvs70&&1","乐事超级电视 S60&&4999&&img/3.jpg&&lstvs60&&1"]
        for(var i=0;i<arrProducts.length;i++){
            var arrProductsInfo=arrProducts[i].split("&&");
            if(arrProductsInfo[3]==pid){
                arrProducts.splice(i,1);//从下标为1的元素开始删除一个；删除i
                break;
            }
        }
        var sTr=arrProducts.join("||");
        setCookie("carCookie",sTr,30);
    }
    getCarCookie();

</script>
</html>
<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>

		<link rel="stylesheet" type="text/css" href="css/new_file.css" />
	</head>

	<body>

		<div id="header">
			<img src="img/header.png" />
		</div>

		<div id="nav">
			<img src="img/nav.png" />
		</div>

		<div id="part">
			<div class="partCon">
				<div class="left"><img src="img/left.png" /></div>
				<div class="banner">

					<a href="javascript:void(0)" class="prev"></a>
					<a href="javascript:void(0)" class="next"></a>

					<div class="scroll">
						<img class="first" src="img/flash1.jpg" />
						<img src="img/flash2.jpg" />
						<img src="img/flash3.jpg" />
						<img src="img/flash4.jpg" />
						<img src="img/flash5.png" />
						<img src="img/flash6.jpg" />

					</div>

					<div class="btn">
						<span class="hover"></span>
						<span></span>
						<span></span>
						<span></span>
						<span></span>
						<span></span>
					</div>

				</div>
				<div class="right"><img src="img/right.png" /></div>
			</div>
		</div>

		<script type="text/javascript" src="js/jquery-1.11.3.js"></script>
		<script type="text/javascript">
			$(function() {
				
				var clearTime = null;
				var $index = 0; 
				var $qiandex = 0;
				$(".btn span").mouseover(function() {
					clearInterval(clearTime);
					$index = $(this).index(); //获取序列号
					scrollPlay();
					$qiandex = $index; //把当前的值赋给下一次的前一个序列号
				}).mouseout(function(){
					autoPlay();
				});
				$(".banner .next").click(function() {
					$index++;
					if ($index > 5) {
						$index = 0;
						$qiandex = 5;
					}
					scrollPlay()
					$qiandex = $index;
					clearInterval(clearTime);
					autoPlay();
				});
				$(".banner .prev").click(function() {
					$index--;
					if ($index < 0) {
						$index = 5;
						$qiandex = 0;
					}
					scrollPlay()
					$qiandex = $index;
					clearInterval(clearTime);
					autoPlay();
				});
				
				
				autoPlay();
				
				function autoPlay() {
					clearTime = setInterval(function() {
						$index++;
						if ($index > 5) {
							$index = 0;
							$qiandex = 5;
						}
						scrollPlay();
						$qiandex = $index;
					}, 2000);
					
				}

				function scrollPlay() {
					$(".btn span").eq($index).addClass("hover").siblings().removeClass("hover");
					if ($index == 0 && $qiandex == 5) {
						$(".scroll img").eq($qiandex).stop(true, true).animate({
							"left": "-820px"
						});
						$(".scroll img").eq($index).css("left", "820px").stop(true, true).animate({
							"left": "0"
						});
					} else if ($index == 5 && $qiandex == 0) {
						$(".scroll img").eq($qiandex).stop(true, true).animate({
							"left": "820px"
						});
						$(".scroll img").eq($index).css("left", "-820px").stop(true, true).animate({
							"left": "0"
						});
					} else if ($index > $qiandex) { //左移
						$(".scroll img").eq($qiandex).stop(true, true).animate({
							"left": "-820px"
						});
						$(".scroll img").eq($index).css("left", "820px").stop(true, true).animate({
							"left": "0"
						});
					} else if ($index < $qiandex) { //右移
						$(".scroll img").eq($qiandex).stop(true, true).animate({
							"left": "820px"
						});
						$(".scroll img").eq($index).css("left", "-820px").stop(true, true).animate({
							"left": "0"
						});
					}
				}
				
				$(".banner").hover(function(){
					
					$(" .prev,.next").stop().fadeIn(500);
					
				},function(){
						$(" .prev,.next").stop().fadeOut(500);
				});
				
			});
		</script>

	</body>

</html>
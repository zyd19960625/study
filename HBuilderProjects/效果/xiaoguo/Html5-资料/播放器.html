<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>播放器</title>
    <style>
        *{margin: 0;padding:0;font-size: 20px;}
        input{width:90px;height:30px;}
        p{font-size: 20px;line-height: 40px;text-align: center;}
        #d1{width:500px;height: 40px;background-color: #30B1EB;margin:20px 0;position:relative; }
        #d2{width:50px;height: 40px;background-color: #cc33ff;position: absolute;left:0px;}

        #d3{width:500px;height: 40px;background-color: #30B1EB;margin:20px 0;position:relative; }
        #d4{width:50px;height: 40px;background-color: #cc33ff;position: absolute;left:450px;}
    </style>
    <script>
        window.onload= function () {
            var V1=document.getElementById("V1");
            var inp=document.getElementsByTagName("input");
            var div1=document.getElementById("d1");
            var div2=document.getElementById("d2");
            var div3=document.getElementById("d3");
            var div4=document.getElementById("d4");
            var dX=0;
            var ds=false;
            inp[0].onclick=function(){
                if(V1.paused){
                    V1.play();
                    this.value = "暂停";
                    dq_sj();
                    ds=setInterval(dq_sj,300);
                }else{
                    V1.pause();
                    this.value = "播放";
                    clearInterval(ds);
                }
            }

            function dq_sj(){
                inp[1].value=z_sj(V1.currentTime);
                var bl  = V1.currentTime/V1.duration;
                div2.style.left = bl  * 450 + "px";                                       //比例
                console.log(bl);
            }
            setInterval(dq_sj,300);
            inp[2].value=z_sj(V1.duration);
            function z_sj(sj){
                sj=parseInt(sj);
                var ih=zero(parseInt(sj/3600));
                var im=zero(parseInt(sj/60));
                var is=zero(parseInt(sj%60));
                return ih+":"+im+":"+is;
                console.log(ih+":"+im+":"+is);
            }
            function zero(a){
                if(a<=9){
                    return "0"+a;
                }else{
                    return ""+a;
                }

            }

            inp[3].onclick=function(){
                if(V1.muted){
                    V1.muted=false;
                    this.value="静音";
                }else{
                    V1.muted=true;
                    this.value="取消静音";
                }
            }

            inp[4].onclick=function(){
//                V1.style.width="1300px";
//                V1.style.height="690px";
                V1.webkitRequestFullScreen();                                            //只支持谷歌
            }

            inp[5].onclick=function(){
                var src0=document.getElementById("src0");
                var sr=src0.src;
                a=sr.substring(sr.lastIndexOf("/")+1,sr.indexOf("."));
                a=Number(a)+1;
//                src0.src=sr.substring(0,sr.lastIndexOf("/")+1)+a+sr.substring(sr.indexOf("."));
                src0.src="vedio/"+a+".mp4";
                console.log(src0.src)
            }

            inp[6].onchange= function () {
                var b=this.files;
                console.log(b)
            }

            div2.onmousedown = function(ev){
                var ev = ev || window.event;
                dX = ev.clientX - div2.offsetLeft;                                       //鼠标距滑块左侧距离
                document.onmousemove = function(ev){
                    var ev = ev || window.event;
                    var L = ev.clientX - dX;                                                    //滑块距左侧的距离
                    if(L<0){                                                                             //判断不让滑块出框
                        L = 0;
                    }
                    else if(L>div1.offsetWidth - div2.offsetWidth){
                        L = div1.offsetWidth - div2.offsetWidth;
                    }
                    div2.style.left = L + 'px';                                                  //控制滑块距左边的距离移动滑块
                    var bl = L/(div1.offsetWidth - div2.offsetWidth);           //计算比例
                    V1.currentTime = bl * V1.duration;                                  //比例*总时间
                    dq_sj();
                }
                document.onmouseup = function(){
                    document.onmousemove = null;
                }
                return false;
            }


            div4.onmousedown = function(ev){
                var ev = ev || window.event;
                X2 = ev.clientX - div4.offsetLeft;
                document.onmousemove = function(ev){
                    var ev = ev || window.event;
                    var L = ev.clientX - X2;
                    if(L<0){
                        L = 0;
                    }
                    else if(L>div3.offsetWidth - div4.offsetWidth){
                        L = div3.offsetWidth - div4.offsetWidth;
                    }
                    div4.style.left = L + 'px';
                    var bl = L/(div3.offsetWidth - div4.offsetWidth);
                    V1.volume = bl;
                };
                document.onmouseup = function(){
                    document.onmousemove = null;
                };
                return false;
            };
        }
    </script>

</head>
<body>
    <video id="V1" width="500px" height="380px" controls>
        <source id="src0"  src="vedio/1.mp4"/>
        <!--<source src="2.mp4"/>-->
    </video>

    <div id="d1">
        <div id="d2"><p>快进</p></div>
    </div>
    <div id="d3">
        <div id="d4"><p>音量</p></div>
    </div>
    <br/>
    <input type="button" value="播放"/>
    <input type="button" value="00:00:00"/>
    <input type="button" value="00:00:00"/>
    <input type="button" value="静音"/>
    <input type="button" value="全屏"/>
    <input type="button" value="下一个"/>
    <input type="file" multiple="multiple"/><br/>


</body>
</html>